visual_query:
  split: 'val'
  feature_extractor: 'dinov2'
  patch_size: 14
  batch_size: 1

  # BIGGEST WIN: do just one query crop; skip frame crops
  query_cropping_factors: [1.0]
  frame_cropping_factors: [1.0]

  # Fewer candidates = less matching / NMS work
  selection_top_k: 10
  selection_top_p: 0.6
  refinement_top_p: 0.6
  refinement_min_score: 0.6
  tracking_top_p: 0.6
  nms_threshold: 0.8
  query_selection_threshold: 0.5
  track_selection_threshold: 0.7

  # Keep SAM2, but pass its config here (your code reads this key)
  tracker_name: 'sam2'
  tracker_param: "sam2/sam2_hiera_l"


  # Slowdowns often come from encodingâ€”throttle per-frame batch
  encode_batch_size: 1

  save_dir: 'logs/'
  exp_name: 'ren-dinov2-val'

ren:
  pretrained:
    feature_extractor: 'dinov2_vitl14'
    patch_sizes: [14]
    region_extractor: 'sam2_hiera'
    sam2_hiera_ckpt: "C:/Users/ishur/LocalProjects/URSA/REN/checkpoints/sam2_hiera_large.pt"  
    sam2_hiera_config: 'segment_anything/sam2/configs/sam2/sam2_hiera_l.yaml'

  architecture:
    grid_size: 32
    hidden_dim: 1024
    decoder_layers: 4
    num_attention_heads: 8

  parameters:
    feature_extractor: 'dinov2_vitl14'
    ren_ckpt: 'logs/ren-dinov2-vitl14/checkpoint.pth'

    # BIGGEST WIN: downscale input before ViT-L
    image_resolution: 308

    grid_size: 32
    use_slic: False            # disable SLIC to save CPU (optional)
    aggregate_tokens: False
    token_variant: 'ren'
    merge_similarity: 0.8

    # These are mostly training params; harmless for inference
    batch_size: 4
    learning_rate: 0.001
    num_epochs: 50
    accumulation_steps: 1
    warmup_steps: 100
    logging_steps: 25
    max_grad_norm: 5.0
    upsample_features: False
    deduplicate_masks: False

  logging:
    save_dir: '../logs/'
    exp_name: 'ren-dinov2-vitl14'
